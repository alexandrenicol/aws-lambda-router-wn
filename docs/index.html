
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>AWSLambdaRouter JS Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#installation" class="toc-h1 toc-link" data-title="Installation">Installation</a>
          </li>
          <li>
            <a href="#instantiation" class="toc-h1 toc-link" data-title="Instantiation">Instantiation</a>
          </li>
          <li>
            <a href="#creating-routes" class="toc-h1 toc-link" data-title="Creating routes">Creating routes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-methods" class="toc-h2 toc-link" data-title="GET methods">GET methods</a>
                  </li>
                  <li>
                    <a href="#post-methods" class="toc-h2 toc-link" data-title="POST methods">POST methods</a>
                  </li>
                  <li>
                    <a href="#delete-methods" class="toc-h2 toc-link" data-title="DELETE methods">DELETE methods</a>
                  </li>
                  <li>
                    <a href="#other-methods" class="toc-h2 toc-link" data-title="Other methods">Other methods</a>
                  </li>
                  <li>
                    <a href="#supported-paths" class="toc-h2 toc-link" data-title="Supported paths">Supported paths</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#callback-functions" class="toc-h1 toc-link" data-title="Callback functions">Callback functions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-object" class="toc-h2 toc-link" data-title="Request object">Request object</a>
                  </li>
                  <li>
                    <a href="#response-function" class="toc-h2 toc-link" data-title="Response function">Response function</a>
                  </li>
                  <li>
                    <a href="#options" class="toc-h2 toc-link" data-title="Options">Options</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#retrieve-parameters" class="toc-h1 toc-link" data-title="Retrieve parameters">Retrieve parameters</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#query-string-parameters" class="toc-h2 toc-link" data-title="Query string parameters">Query string parameters</a>
                  </li>
                  <li>
                    <a href="#body-parameters" class="toc-h2 toc-link" data-title="Body parameters">Body parameters</a>
                  </li>
                  <li>
                    <a href="#request-headers" class="toc-h2 toc-link" data-title="Request headers">Request headers</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-gateway-configuration" class="toc-h1 toc-link" data-title="API Gateway Configuration">API Gateway Configuration</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/alexandrenicol/aws-lambda-router-wn'>See on github</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the AWSLambdaRouter documentation!</p>

<p>AWSLambdaRouter is a simple HTTP router inspired by Express.js router&#39;s syntax. It allows you to transfer your stateless Express application to an AWS Lambda using the proxy integration of AWS API Gateway.</p>
<h1 id='installation'>Installation</h1>
<p><code>npm install aws-lambda-router-wn --save</code></p>
<h1 id='instantiation'>Instantiation</h1><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">AWSLambdaRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-lambda-router-wn'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWSLambdaRouter</span><span class="p">();</span>

<span class="c1">// declare your routes here</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
<p>This is the basic implementation of the AWSLambdaRouter.</p>

<p>The constructor does not require any parameters as it only instantiate an AWSLambdaRouter object.
The <strong>serve</strong> function receives directly the event and the callback from the AWS Lambda handler.</p>

<p>You should not have to alter this basic configuration. to use the AWSLambdaRouter.</p>
<h1 id='creating-routes'>Creating routes</h1>
<p>Of course this basic configuration won&#39;t do anything without any route declaration.</p>

<p>As AWSLambdaRouter is inspired by Express.js, we tried to keep a syntax already known by thousands of developers.</p>
<h2 id='get-methods'>GET methods</h2><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">AWSLambdaRouter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-lambda-router-wn'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWSLambdaRouter</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s1">'hello world'</span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/todo'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// getAllTodos is a fictional function, just for the example</span>
  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="nx">getAllTodos</span><span class="p">();</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">todos</span><span class="p">:</span> <span class="nx">todos</span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
<blockquote>
<p>By default, AWSLambdaRouter response type is &#39;application/json&#39;</p>
</blockquote>

<p>The <strong>get</strong> function takes a <strong>path</strong> and a <strong>callback</strong> function as parameters.</p>

<p>The callback function must be able to receive a <strong>request</strong> object and a <strong>response</strong> function.</p>
<h2 id='post-methods'>POST methods</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/todo/add'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">todo</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">newTodo</span> <span class="o">=</span> <span class="nx">insertTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">status</span><span class="p">:</span> <span class="s1">'todo added'</span><span class="p">,</span> <span class="na">todo</span><span class="p">:</span> <span class="nx">newTodo</span><span class="p">.</span><span class="nx">id</span><span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>By default, AWSLambdaRouter will expect request&#39;s Content-Type to be &#39;application/json&#39;</p>
</blockquote>

<p>The <strong>post</strong> function also takes a <strong>path</strong> and a <strong>callback</strong> function as parameters.</p>

<p>As for the get function, the callback function must be able to receive a <strong>request</strong> object and a <strong>response</strong> function.</p>

<p>The body parameters are accessible from the <strong>request.body</strong> variable.</p>
<h2 id='delete-methods'>DELETE methods</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'/todo'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">todo</span><span class="p">;</span>
  <span class="nx">deleteTodo</span><span class="p">(</span><span class="nx">todo</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">status</span><span class="p">:</span> <span class="s1">'todo deleted'</span><span class="p">});</span>
<span class="p">});</span>
</code></pre>
<p>The <strong>delete</strong> function also takes a <strong>path</strong> and a <strong>callback</strong> function as parameters.</p>

<p>As for the get function, the callback function must be able to receive a <strong>request</strong> object and a <strong>response</strong> function.</p>

<p>The body parameters are accessible from the <strong>request.body</strong> variable.</p>
<h2 id='other-methods'>Other methods</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'PUT'</span><span class="p">,</span> <span class="s1">'/todo/batch'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">todos</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">newTodos</span> <span class="o">=</span> <span class="nx">insertLoadsOfTodos</span><span class="p">(</span><span class="nx">todos</span><span class="p">);</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">status</span><span class="p">:</span> <span class="s1">'todos inserted'</span><span class="p">,</span> <span class="na">todos</span><span class="p">:</span> <span class="nx">newTodos</span><span class="p">});</span>
<span class="p">});</span>
</code></pre>
<p>You can also use the <strong>route</strong> function to declare your route.</p>

<p>The <strong>route</strong> function takes a <strong>method</strong>, a <strong>path</strong> and a <strong>callback</strong> function as parameters.</p>

<p><strong>Method</strong> is not case sensitive; e.g. you can write <em>post</em> or <em>POST</em>.</p>

<p>The callback function must be able to receive a <strong>request</strong> object and a <strong>response</strong> function.</p>

<p>The body parameters are accessible from the <strong>request.body</strong> variable.</p>

<aside class="success">
AWSLambdaRouter supports GET, POST, PUT, PATCH, and DELETE methods.
</aside>
<h2 id='supported-paths'>Supported paths</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s1">'hello world'</span><span class="p">});</span>
<span class="p">});</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/example'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s1">'hello world'</span><span class="p">});</span>
<span class="p">});</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/example/hello/world'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s1">'hello world'</span><span class="p">});</span>
<span class="p">});</span>
</code></pre>
<p>Here are some examples of the paths you can use to declare your route.</p>
<h1 id='callback-functions'>Callback functions</h1>
<p>Every routes must have a callback function. This function will be executed if the event&#39;s path and method match one the AWSLambdaRouter route declaration.</p>

<p>The callback function must accept a <strong>request</strong> object and a <strong>response</strong> function as parameters.</p>
<h2 id='request-object'>Request object</h2>
<blockquote>
<p>Example of a raw request object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"httpMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Accept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*/*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Accept-Encoding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gzip, deflate"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Authorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer *************"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cache-control"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no-cache"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CloudFront-Forwarded-Proto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CloudFront-Is-Desktop-Viewer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CloudFront-Is-Mobile-Viewer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CloudFront-Is-SmartTV-Viewer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CloudFront-Is-Tablet-Viewer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CloudFront-Viewer-Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Custom-Header"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thisisacustomheader"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"******.execute-api.eu-west-1.amazonaws.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Postman-Token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ce28c4b2-9c45-48f2-8793-8ab1ff0bc25c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"User-Agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PostmanRuntime/6.4.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Via"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1 *****.cloudfront.net (CloudFront)"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"X-Amz-Cf-Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*******"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"X-Amzn-Trace-Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"********"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"X-Forwarded-For"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**.**.**.**, **.**.**.**"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"X-Forwarded-Port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"443"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"X-Forwarded-Proto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"queryStringParameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"test1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"test2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pathParameters"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stageVariables"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"requestContext"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/prod"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*******"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"******"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"stage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"******"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"identity"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cognitoIdentityPoolId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cognitoIdentityId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"caller"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**.**.**.**"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"accessKey"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cognitoAuthenticationType"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cognitoAuthenticationProvider"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userArn"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PostmanRuntime/6.4.1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"resourcePath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"httpMethod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"apiId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*******"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\n\t\"</span><span class="s2">data</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n\t\t</span><span class="s2">{</span><span class="se">\n\t\t\t\"</span><span class="s2">foo</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">bar</span><span class="se">\"\n\t\t</span><span class="s2">}</span><span class="se">\n\t</span><span class="s2">]</span><span class="se">\n</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isBase64Encoded"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The <strong>request</strong> object will contain any information you need from the request receive by API Gateway and transferred to your Lambda.</p>

<p>The things you&#39;ll probably need are:
1. <a href="#query-string-parameters">request.queryStringParameters</a>
2. <a href="#body-parameters">request.body</a>
3. <a href="#request-headers">request.headers</a></p>
<h2 id='response-function'>Response function</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s1">'hello world'</span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/forced-error'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'This is an error message'</span><span class="p">),</span> <span class="kc">null</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/index'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">`
&lt;!DOCTYPE html&gt;
  &lt;html&gt;
    &lt;head&gt;
      &lt;meta charset="UTF-8"&gt;
      &lt;title&gt;title&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h1&gt;A random website&lt;/h1&gt;
    &lt;/body&gt;
 &lt;/html&gt;
`</span><span class="p">);</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'text/html'</span>
<span class="p">});</span>
</code></pre>
<p>The <strong>response</strong> function takes two parameters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>A JavaScript Error object, should be <strong>null</strong> if the request is successful.</td>
</tr>
<tr>
<td>data</td>
<td>The data that will be sent in the HTTP response. Can be a JavaScript object, as well a String.</td>
</tr>
</tbody></table>
<h2 id='options'>Options</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'/foo'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">param</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">`&lt;div&gt;foo:</span><span class="p">${</span><span class="nx">param</span><span class="p">.</span><span class="nx">foo</span><span class="p">}</span><span class="s2">&lt;/div&gt;`</span><span class="p">);</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">bodyType</span><span class="p">:</span> <span class="s1">'application/x-www-form-urlencoded'</span><span class="p">,</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'text/html'</span>
<span class="p">});</span>
</code></pre>
<p>The functions <strong>get</strong>, <strong>post</strong>, <strong>delete</strong>, and <strong>route</strong>, can take an additional, optional parameters: <strong>options</strong>.</p>

<p>The <strong>options</strong> parameters should be a JavaScript object. Here are the available options.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bodyType</td>
<td>application/json</td>
<td>Sets the expected Content-Type of the request received for thie route.</td>
</tr>
<tr>
<td>responseType</td>
<td>application/json</td>
<td>Sets the Content-Type of the response for this route.</td>
</tr>
</tbody></table>
<h1 id='retrieve-parameters'>Retrieve parameters</h1><h2 id='query-string-parameters'>Query string parameters</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// When GET /example?id=1&amp;name=John is sent</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/example'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">queryStringParameters</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">queryStringParameters</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s2">`Hello </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">});</span> <span class="c1">//'Hello John'</span>
<span class="p">});</span>
</code></pre>
<p>In the <strong>callback</strong> function, you can retrieve query string parameters in the <strong>request.queryStringParameters</strong> object.
You don&#39;t need to specify the parameters that will be required in the route configuration.</p>
<h2 id='body-parameters'>Body parameters</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/example'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s2">`Hello </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">});</span> <span class="c1">//'Hello John'</span>
<span class="p">});</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/example/form'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s2">`Hello </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">});</span> <span class="c1">//'Hello John'</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">bodyType</span><span class="p">:</span> <span class="s1">'application/x-www-form-urlencoded'</span>
<span class="p">});</span>
</code></pre>
<p>In the <strong>callback</strong> function, you can retrieve query string parameters in the <strong>request.body</strong> object.</p>

<p>Depending on the Content-Type of the request receive by API Gateway and by the Lambda, you might want to change the <strong>bodyType</strong> options.</p>

<aside class="success">
AWSLambdaRouter will automatically decode requests with 'application/x-www-form-urlencoded' and 'application/json' Content-Type and will make body parameters available in the event.body object. Other Content-Type body will be returned raw in the event.body object.
</aside>
<h2 id='request-headers'>Request headers</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">;</span>
  <span class="nx">response</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="s1">'hello world'</span><span class="p">});</span>
<span class="p">});</span>
</code></pre>
<p>In the <strong>callback</strong> function, you can retrieve headers in the <strong>request.body</strong> object.</p>
<h1 id='api-gateway-configuration'>API Gateway Configuration</h1>
<ol>
<li>First, create a new API on AWS API Gateway (it&#39;s important that you use 1 API for 1 AWSLambdaRouter).</li>
<li>You should have a &#39;/&#39; route with no methods configured, create a new resource using the actions button.</li>
<li>Click on <code>configure as proxy resource</code> and leave the field as they are, enable the CORS configuration if you wish (this will add OPTIONS route). You should have something similar to the image below:
<img src="https://s3-eu-west-1.amazonaws.com/static-webnicol/github/aws-lambda-router-wn/new-child-res.png" alt="proxy resource" /></li>
<li>Click on create, you should be redirect to the configuration of the ANY method, configure it as a Lambda proxy, and enter the name of your lambda, like below:
<img src="https://s3-eu-west-1.amazonaws.com/static-webnicol/github/aws-lambda-router-wn/proxy-setup.png" alt="any setup" /></li>
<li>Click on save, select the &#39;/&#39; route and click on the actions button to create a new ANY method (this time for the &#39;/&#39; route, not &#39;/{proxy+}&#39;.</li>
<li>Configure the new ANY method like the previous one.</li>
<li>Enable CORS on the &#39;/&#39; route if needed.</li>
<li>In the end, you should have something similar for your two ANY method, like this image below:
<img src="https://s3-eu-west-1.amazonaws.com/static-webnicol/github/aws-lambda-router-wn/slash-any.png" alt="final" /></li>
<li>Use the actions button to deploy your API.</li>
</ol>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
